# 암호 알고리즘 종류
#개인공부/암호학

## 대칭키 암호
### 알고리즘 작동방식
* ::동일한 키를 이용하여 암호화 및 복호화를 하는 알고리즘::
```
K = Key, M = Message, C = Cipher text
Encrypt(K, M) = C
Decrypt(K, C) = M
```
### 종류
* **DES** : 옛날꺼
	* 키 사이즈 = 56bit(7byte)
	* 함수 입출력 사이즈 = 64bit(8byte)
* **AES** : 최근꺼
	* 키 사이즈 = 128, 192, 256bit(16, 24, 32byte)
	* 함수 입출력 사이즈 : 128bit(16byte)
* SEED, ARIA : 한국에서 개발한 알고리즘
	* SEED는 DES와 비슷하고
	* ARIA는 AES와 비슷하다
### 운용모드(Mode of Operation)
* ::**함수 입출력 사이즈**는 암호화 / 복호화 함수가 한번에 받을 수 있는 비트의 크기를 의미함::
* AES의 경우에는 16byte인데 따라서 16byte보다 큰 파일을 암호화 / 복호화하는 경우에는 파일을 16byte단위로 데통에서마냥 단편화시킨다
![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%203.55.31.png)
* **ECB**의 경우에는 그냥 16byte씩 잘라서 암호화를 하는 것이고
* **CBC**의 경우에는 16byte로 자른 것과 이전의 암호화한 결과를 XOR연산한 후 암호화를 진행하는 것을 의미
* 이렇게 하는 이유는 그냥 단편화한 후 바로 암호화를 진행하면 같은 값에 대해서는 같은 암호로 암호화가 되기 때문이다
![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%203.58.20.png)
* 위의 그림을 보면 흰색을 암호화하면 그것의 결과는 같기 때문에 이렇게 윤곽이 남게되는 것
* 그리고 CBC의 경우 첫 블록은 이전의 암호화된 블록이 없기 때문에 **Initialization Vector(IV)**라는 것을 초기값으로 넣는 것
	* 즉, 암호화를 할때 Message와 Key만 넣는게 아니라 IV도 넣게 된다
- - - -
## 비대칭키 암호
### 작동방식
* ::암호화에 쓰이는 키와 복호화에 쓰이는 키가 다른 경우::
* 이때 ::암호화에 쓰이는 키를 **공개키(Pulbic Key)**::라고 하고
* ::복호화에 쓰이는 키를 **개인키(Private Key)**::라고 한다.
```
Encrypt(Pub, M) = C
Decrypt(Pri, C) = M
```
* 또한 **인증 - 서명(Sign)**과 **검증(Verify)**가 있는데 이는 다음과 같음
```
Sign(Priv, M) = S
Verify(Pub, M, S) = Bool
```
* 이것은 내가 잠갔다는 것을 인증 - 서명하는거다?
### 종류
* **RSA** : 소인수분해 기반의 전자서명 알고리즘
	* 러프하게 설명하면 엄청 큰 소수 두개를 개인키로 하고 그것의 곱을 공개키로 하는 것
	* 공개키를 안다고 해서 이것을 소인수분해해 두개의 소수를 알아내기는 어렵기 때문에 공개키를 가지고 개인키를 알아낼기 어렵다
	* 키 사이즈 : 보통 2048, 3072, 4096bit를 사용
	* 입출력 사이즈 : 키 사이즈 만큼
* ::**ECDSA** : **타원곡선 암호체계(ECC)**기반의 전자서명 알고리즘::
	* **ECC**라는 것은
![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204.21.26.png)
	* 요래 생긴 곡선이고
![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204.22.16.png)
	* 위의 수식을 따른다
	* 어쨋든 이 곡선을 이용해 공개키와 개인키를 만드는 방법이 ECDSA이며
	* ECDSA의 일부 곡선들의 a, b값이 랜덤값이 아니라 백도어가 존재하는 것으로 밝혀져 나온 곡선이 **EdDSA**이다
## 키 종류별 안전성 비교
![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204.25.52.png)
* 한 row는 비슷한 수준의 암호화 수준을 의미함
* 대칭키의 경우에는 bit사이즈 만큼의 암호화 수준을 갖는데
	* 만약 3bit라면 2^3인 8개의 키를 넣어봐야 올바른 키를 알아낼 수 있는 것
* RSA의 경우에는 bit사이즈 만큼의 암호화 수준을 갖지는 않는다
	* 10bit여도 1024개보단 적은 시행착오를 거쳐도 키를 알아낼 수 있다는 의미
- - - -
## 해시
### 원리
* 해시 함수는 다음과 같은 성질을 갖는다
* ::임의 길이를 갖는 입력을 받아 고정 길이를 갖는 출력을 반환한다::
* ::출력값을 가지고는 입력값을 알아낼 수 없다::
* ::다른 입력값을 넣었을때는 다른 출력값이 나온다::
* ::같은 입력값을 넣었을때는 같은 입력값이 나온다::
* 해시함수는 ::원본을 보지 않고 두 값이 같음::을 알아낼 수 있다는 장점때문에  _비밀번호를 저장_ 할때 많이 사용된다
	* 즉, _비밀번호를 해시함수를 이용해 암호화하여 저장_ 하면 로그인을 할 때 입력한 값을 해시로 변환하여 비교하는데
	* 값이 원본값과 같은지 다른지를 비교할 수는 있지만
	* 만약에 이 데이터가 유출이 되어도 원본값을 알아낼 수는 없기 때문에 보안성이 존재하는 것이다
### 종류
* **SHA-1** : 160비트의 결과값으로 반환하는 해시함수
	* 2017년에 충돌쌍이 나와 사용 중단을 권고하는 추세이다
	* **충돌쌍**이라는 것은 ::해시함수의 경우에는 다른값을 넣으면 다른값이 나와야 되지만 같은값을 반환하는 경우::이다
* **SHA-2**는 224, 256, 384, 512bit 이 넷중 하나의 크기로 출력값을 반환하는 해시함수를 의미한다
* **SHA-3**는 SHA-2가 뚫일 경우를 대비하여 만들어놓은 대비책
- - - -
## 바이너리 인코딩
* 얘는 암호화가 아니어서 누구나 변환과 원본으로 바꿀 수 있다
* ::바이너리 데이터를 7비트씩 끊어서 ASCII코드로 변환하면 ASCII코드중에 화면에 출력되지 않는 코드가 존재하기 때문에 이것을 Ctrl C+V할 수 없다::
* 따라서 ::바이너리 데이터를 6bit씩 끊어서 화면에 출력되는 ASCII코드와 대응시켜서 바이너리 데이터를 표현한 것을 **Base64**인코딩::이라고 한다
* 그리고 ::URL을 표현할때는 띄어쓰기는 +로 표현되고 / 는 구분자로 쓰이기 때문에 Base64에서의 +와 / 를 -와 _로 바꾼 것이 **Base64url**::이다
### 구조체 인코딩
* C언어에서의 구조체나 자바의 클래스처럼 여러 멤버 변수로 구성된 하나의 구조를 갖는 객체를 인코딩 하는 경우에는 먼저
![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-06-21%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204.49.45.png)
* 위처럼 변환한다 - 이것을 **ASN-1**인코딩이라고 한다
* 그리고 이 결과를 바이트로 바꾼 것이 **DER**인코딩이고
* **DER**인코딩을 Base64로 인코딩으로 바꾼 것이 **PEM**인코딩이다
* 즉, **DER**인코딩은 16진수로 표현되고 **PEM**인코딩은 64진수로 표현된다
